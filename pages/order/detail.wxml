<view><view class="hm-header-xian"></view><block wx:if="{{order}}"><view class="hm-p-lr-20"><view class="hm-p-lr-20 hm-bg-f hm-br-8 hm-m-t-20"><view class="hm-p-tb-20 hm-text-center"><block wx:if="{{order.order_mode.value==10&&order.table_id>0}}"><view>餐桌<text class="hm-col-warning hm-font-b hm-m-l-10">{{order.table.table_name}}</text></view></block><block wx:else><view>取餐号<text class="hm-col-warning hm-font-b hm-m-l-10">{{order.row_no}}</text></view></block><block wx:if="{{order.flavor}}"><view class="hm-p-t-20 u-line-1 hm-font-22 hm-col-tips">{{''+order.flavor+''}}</view></block><block wx:if="{{order.message}}"><view class="hm-p-t-20 u-line-1 hm-font-22 hm-col-tips">{{''+order.message+''}}</view></block></view><view class="hm-p-tb-20 hm-text-center hm-border-t hm-col-content"><u-steps vue-id="a2b0478a-1" current="{{steps_index}}" activeColor="#ff9900" dot="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{order.order_status.value==10||order.order_status.value==30}}"><block><u-steps-item vue-id="{{('a2b0478a-2')+','+('a2b0478a-1')}}" title="{{steps[0][0].title}}" desc="{{steps[0][0].desc}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-3')+','+('a2b0478a-1')}}" title="{{steps[0][1].title}}" desc="{{steps[0][1].desc}}" error="{{steps[0][1].error}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-4')+','+('a2b0478a-1')}}" title="{{steps[0][2].title}}" desc="{{steps[0][2].desc}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-5')+','+('a2b0478a-1')}}" title="{{steps[0][3].title}}" desc="{{steps[0][3].desc}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-6')+','+('a2b0478a-1')}}" title="{{steps[0][4].title}}" desc="{{steps[0][4].desc}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-7')+','+('a2b0478a-1')}}" title="{{steps[0][5].title}}" desc="{{steps[0][5].desc}}" bind:__l="__l"></u-steps-item></block></block><block wx:if="{{order.order_status.value==20}}"><block><u-steps-item vue-id="{{('a2b0478a-8')+','+('a2b0478a-1')}}" title="{{steps[1][0].title}}" desc="{{steps[1][0].desc}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-9')+','+('a2b0478a-1')}}" title="{{steps[1][1].title}}" desc="{{steps[1][1].desc}}" bind:__l="__l"></u-steps-item></block></block><block wx:if="{{order.order_status.value==40}}"><block><u-steps-item vue-id="{{('a2b0478a-10')+','+('a2b0478a-1')}}" title="{{steps[2][0].title}}" desc="{{steps[2][0].desc}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-11')+','+('a2b0478a-1')}}" title="{{steps[2][1].title}}" desc="{{steps[2][1].desc}}" bind:__l="__l"></u-steps-item><u-steps-item vue-id="{{('a2b0478a-12')+','+('a2b0478a-1')}}" title="{{steps[2][2].title}}" desc="{{steps[2][2].desc}}" bind:__l="__l"></u-steps-item></block></block></u-steps></view><block wx:if="{{order.order_mode.value==20}}"><view class="hm-p-tb-20 hm-border-t"><view class="hm-dis-block-inline hm-font-28 hm-fl">收货地址</view><view class="hm-dis-block-inline hm-m-l-50 hm-font-26"><view class="hm-col-main">{{''+order.address.name}}<text class="hm-m-l-10">{{"("+order.address.gender.text+")"}}</text><text class="hm-m-l-20">{{order.address.phone}}</text></view><view class="hm-p-t-10 hm-col-tips">{{''+order.address.detail+''}}</view></view></view></block><block wx:if="{{order.order_mode.value==20&&order.delivery&&order.delivery.delivery_status.value>10}}"><view data-event-opts="{{[['tap',[['phone',['$0'],['order.delivery.phone']]]]]}}" class="hm-p-tb-20 hm-border-t" bindtap="__e"><image class="hm-br-b50 hm-fl hm-m-r-10" style="width:80rpx;height:80rpx;" src="{{applet.domain+'/addons/single/applet/delivery.jpg'}}"></image><view class="hm-dis-block-inline hm-font-26"><view class="hm-p-l-10">{{order.delivery.linkman}}<text class="hm-m-l-10 hm-col-tips">{{"("+(order.delivery.company.text?order.delivery.company.text:'--')+")"}}</text></view><view class="hm-p-t-10"><u-rate vue-id="a2b0478a-13" value="5" activeColor="#FF9900" inactiveColor="#999" allowHalf="{{true}}" bind:__l="__l"></u-rate></view></view><view class="hm-dis-block-inline hm-fr hm-m-t-20"><u-icon vue-id="a2b0478a-14" name="phone-fill" size="30" color="#444" bind:__l="__l"></u-icon></view></view></block><view class="hm-text-center hm-border-t hm-col-content"><block wx:if="{{order.order_status.value==10}}"><block><block wx:if="{{order.shop_status.value==10}}"><view class="hm-dis-block-inline hm-p-tb-20"><u-button vue-id="a2b0478a-15" text="取消订单" data-event-opts="{{[['^click',[['cancelOrder']]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></block><block wx:if="{{order.pay_status.value==10}}"><view class="hm-m-l-20 hm-dis-block-inline hm-p-tb-20"><u-button vue-id="a2b0478a-16" type="warning" text="立即付款" data-event-opts="{{[['^click',[['payOrder']]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></block><block wx:if="{{order.shop_status.value==20&&order.delivery_status.value==10}}"><view class="hm-m-l-20 hm-dis-block-inline hm-p-tb-20"><u-button vue-id="a2b0478a-17" type="error" text="我要退单" data-event-opts="{{[['^click',[['goTo',['order/refund?id='+order.order_id]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></block><block wx:if="{{order.pay_status.value==20&&order.delivery_status.value==30&&order.receipt_status.value==10}}"><view class="hm-m-l-20 hm-dis-block-inline hm-p-tb-20"><u-button vue-id="a2b0478a-18" type="warning" text="确认完成" data-event-opts="{{[['^click',[['receipt']]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></block><block wx:if="{{order.order_mode.value==10&&order.table_id>0}}"><view class="hm-m-l-20 hm-dis-block-inline hm-p-tb-20"><u-button vue-id="a2b0478a-19" type="success" text="我要加菜" data-event-opts="{{[['^click',[['addDish']]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></block></block></block><block wx:if="{{order.order_status.value==30&&order.is_cmt.value==0}}"><view class="hm-dis-block-inline hm-p-tb-20"><u-button vue-id="a2b0478a-20" type="warning" text="我要评价" data-event-opts="{{[['^click',[['goTo',['order/comment?id='+order.order_id]]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></block></view></view><view class="hm-p-lr-20 hm-bg-f hm-br-8 hm-m-t-20 hm-font-26"><view class="hm-p-tb-20 hm-border-b hm-font-28">商品列表</view><block wx:for="{{order.goods}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="hm-p-tb-20 hm-border-b" style="height:120rpx;"><image class="hm-fl hm-br-8 hm-m-r-20" style="height:120rpx;width:120rpx;" src="{{item.image.url}}"></image><view class="hm-m-t-10 u-line-1">{{item.goods_name}}</view><block wx:if="{{item.goods_attr}}"><view class="fhm-ont-28 hm-col-tips">{{item.goods_attr}}</view></block><view class="hm-font-28"><text class="hm-col-error hm-m-r-10">{{"￥"+item.goods_price}}</text><text class="hm-col-content">{{"×"+item.total_num}}</text><block wx:if="{{item.refund_num>0}}"><view class="hm-dis-block-inline hm-m-l-50"><text class="hm-col-error hm-m-r-10">退餐</text><text class="hm-col-content">{{"×"+item.refund_num}}</text></view></block></view></view></block><view class="hm-p-tb-20 hm-text-right">商品合计：<text class="hm-col-error">{{"￥"+order.total_price}}</text></view></view><view class="hm-p-lr-20 hm-bg-f hm-br-8 hm-m-t-20 hm-font-26"><view class="hm-p-tb-20 hm-border-b hm-font-28">订单费用</view><block wx:if="{{order.ware_price>0}}"><view class="hm-p-tb-20 hm-border-b hm-col-tips">茶位费用<text class="hm-col-error hm-fr">{{"+￥"+order.ware_price}}</text></view></block><block wx:if="{{order.delivery_price>0}}"><view class="hm-p-tb-20 hm-border-b hm-col-tips">配送费用<text class="hm-col-error hm-fr">{{"+￥"+order.delivery_price}}</text></view></block><block wx:if="{{order.pack_price>0}}"><view class="hm-p-tb-20 hm-border-b hm-col-tips">包装费用<text class="hm-col-error hm-fr">{{"+￥"+order.pack_price}}</text></view></block><block wx:if="{{order.activity_price>0}}"><view class="hm-p-tb-20 hm-border-b hm-col-tips">优惠金额<text class="hm-col-error hm-fr">{{"-￥"+order.activity_price}}</text></view></block><block wx:if="{{order.order_status.value==40}}"><view class="hm-p-tb-20 hm-border-b hm-col-tips">退款金额<text class="hm-col-error hm-fr">{{"￥"+order.refund_price}}</text></view></block><view class="hm-p-tb-20 hm-border-b hm-col-tips">实付金额<text class="hm-col-error hm-fr">{{"￥"+order.pay_price}}</text></view><view class="hm-p-tb-20 hm-text-center"><view class="hm-dis-block-inline"><u-button vue-id="a2b0478a-21" icon="phone-fill" text="联系商家" data-event-opts="{{[['^click',[['phone',['$0'],['applet.shop.phone']]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view></view><view class="hm-p-lr-20 hm-bg-f hm-br-8 hm-m-t-20 hm-font-26"><view class="hm-p-tb-20 hm-col-tips">订单号码<text class="hm-col-tips hm-m-l-50">{{order.order_no}}</text><view class="hm-dis-block-inline hm-fr"><u-button vue-id="a2b0478a-22" customStyle="{{({padding:'0rpx 30rpx',marginTop:'-8rpx'})}}" size="small" text="复制" data-event-opts="{{[['^click',[['copy',['$0'],['order.order_no']]]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view><view class="hm-p-tb-20 hm-border-t hm-col-tips">订单时间<text class="hm-col-tips hm-m-l-50">{{order.create_time}}</text></view><view class="hm-p-tb-20 hm-border-t hm-col-tips">支付方式<text class="hm-col-tips hm-m-l-50">{{order.pay_mode.text}}</text></view></view></view></block><view class="hm">{{''+applet.copyright+''}}<text class="v">{{"V"+applet.version}}</text></view><u-popup vue-id="a2b0478a-23" show="{{cashier_show}}" mode="center" round="8" closeable="{{true}}" data-event-opts="{{[['^close',[['e0']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="hm-popup"><view class="hm-p-b-20 hm-border-b hm-text-center">支付收银台</view><view class="hm-p-tb-50 hm-text-center"><view class="hm-font-b hm-col-0">￥<text class="hm-font-100">{{order_pay_price}}</text></view><view class="hm-font-28 hm-col-content">订单支付</view></view><block wx:if="{{mp=='weixin'||mp=='other'}}"><view data-event-opts="{{[['tap',[['setPay',[1]]]]]}}" class="hm-p-20 hm-border-t hm-font-26" bindtap="__e"><view class="hm-m-r-15 hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-24')+','+('a2b0478a-23')}}" name="weixin-circle-fill" size="20" color="#19be6b" bind:__l="__l"></u-icon></view>微信<view class="hm-fr hm-dis-block-inline"><block wx:if="{{pay_mode==1}}"><u-icon vue-id="{{('a2b0478a-25')+','+('a2b0478a-23')}}" name="checkbox-mark" size="25" color="#fa3534" bind:__l="__l"></u-icon></block></view></view></block><view data-event-opts="{{[['tap',[['setPay',[2]]]]]}}" class="hm-p-20 hm-border-t hm-border-b hm-font-26" bindtap="__e"><view class="hm-m-r-15 hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-26')+','+('a2b0478a-23')}}" name="red-packet-fill" size="20" color="{{$root.m0<$root.m1?'#c0c4cc':'#FF9900'}}" bind:__l="__l"></u-icon></view><text class="{{[$root.m2<$root.m3?'hm-col-light':'']}}">余额(<text class="{{[$root.m4<$root.m5?'':'hm-col-error']}}">{{"￥"+userInfo.money}}</text>)</text><view class="hm-fr hm-dis-block-inline"><block wx:if="{{pay_mode==2}}"><u-icon vue-id="{{('a2b0478a-27')+','+('a2b0478a-23')}}" name="checkbox-mark" size="25" color="#fa3534" bind:__l="__l"></u-icon></block><block wx:if="{{$root.m6<$root.m7}}"><text class="hm-col-light">余额不足</text></block></view></view><view class="hm-p-t-50"><view class="hm-p-lr-b25"><u-button vue-id="{{('a2b0478a-28')+','+('a2b0478a-23')}}" type="error" text="确认支付" data-event-opts="{{[['^click',[['payment']]]]}}" bind:click="__e" bind:__l="__l"></u-button></view></view></view></u-popup><u-popup vue-id="a2b0478a-29" show="{{spk_box}}" round="8" closeable="{{true}}" data-event-opts="{{[['^close',[['e1']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="hm-p-20 hm-border-b">在线呼叫服务</view><view class="hm-p-tb-50"><view data-event-opts="{{[['tap',[['spk',['money']]]]]}}" class="hm-dis-block-inline hm-w-b16" bindtap="__e"><view class="hm-text-center"><view class="hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-30')+','+('a2b0478a-29')}}" name="red-packet-fill" color="#19be6b" size="30" bind:__l="__l"></u-icon></view></view><view class="hm-text-center hm-font-26 hm-m-t-10">结账</view></view><view data-event-opts="{{[['tap',[['spk',['order']]]]]}}" class="hm-dis-block-inline hm-w-b16" bindtap="__e"><view class="hm-text-center"><view class="hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-31')+','+('a2b0478a-29')}}" name="file-text-fill" color="#19be6b" size="30" bind:__l="__l"></u-icon></view></view><view class="hm-text-center hm-font-26 hm-m-t-10">点单</view></view><view data-event-opts="{{[['tap',[['spk',['pack']]]]]}}" class="hm-dis-block-inline hm-w-b16" bindtap="__e"><view class="hm-text-center"><view class="hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-32')+','+('a2b0478a-29')}}" name="bag-fill" color="#19be6b" size="30" bind:__l="__l"></u-icon></view></view><view class="hm-text-center hm-font-26 hm-m-t-10">打包</view></view><view data-event-opts="{{[['tap',[['spk',['upper']]]]]}}" class="hm-dis-block-inline hm-w-b16" bindtap="__e"><view class="hm-text-center"><view class="hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-33')+','+('a2b0478a-29')}}" name="play-right-fill" color="#19be6b" size="30" bind:__l="__l"></u-icon></view></view><view class="hm-text-center hm-font-26 hm-m-t-10">起菜</view></view><view data-event-opts="{{[['tap',[['spk',['water']]]]]}}" class="hm-dis-block-inline hm-w-b16" bindtap="__e"><view class="hm-text-center"><view class="hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-34')+','+('a2b0478a-29')}}" name="checkmark-circle-fill" color="#19be6b" size="30" bind:__l="__l"></u-icon></view></view><view class="hm-text-center hm-font-26 hm-m-t-10">茶水</view></view><view data-event-opts="{{[['tap',[['spk',['serve']]]]]}}" class="hm-dis-block-inline hm-w-b16" bindtap="__e"><view class="hm-text-center"><view class="hm-dis-block-inline"><u-icon vue-id="{{('a2b0478a-35')+','+('a2b0478a-29')}}" name="bell-fill" color="#19be6b" size="30" bind:__l="__l"></u-icon></view></view><view class="hm-text-center hm-font-26 hm-m-t-10">服务员</view></view></view></u-popup><shortcut vue-id="a2b0478a-36" bind:__l="__l"></shortcut></view>