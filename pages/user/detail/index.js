(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/detail/index"],{"225c":function(e,n,t){},"32be":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=getApp(),a={data:function(){return{applet:{},formData:{userInfo:{nickname:"",gender:0,avatar:"",birthday:""}},user:{user_id:"",gender:"",avatar:"",phone:"",birthday:""},nickname_show:!1,new_nickname:"",gender_show:!1,gender:[["未知","先生","女士"]],maxDate:0,minDate:0,birthday_show:!1,is_birthday:!1}},props:{},onLoad:function(n){this.applet=e.getStorageSync("applet"),this.getUserDetail()},created:function(){var n=this;e.$on("cropper",(function(e){t._upload_file(e,{},(function(e){n.formData.userInfo.avatar=e.data.file_path,n.user.avatar=e.data.url}))}))},methods:{chooseLogo:function(){this.$u.route({url:"pages/cropper/cropper",params:{destWidth:400,destHeight:400,rectWidth:400,rectHeight:400,fileType:"jpg"}})},getUserDetail:function(){var e=this;t._get("user/detail",{},(function(n){e.user.avatar=n.data.avatar.url,e.user.user_id=n.data.user_id,e.user.phone=n.data.phone,e.user.gender=n.data.gender.text,e.formData.userInfo.nickname=n.data.nickname,e.formData.userInfo.avatar=n.data.avatar.path,e.formData.userInfo.gender=n.data.gender.value,e.new_nickname=n.data.nickname,""==n.data.birthday?(e.maxDate=Number(new Date)-31104e7,e.minDate=e.maxDate-186624e7,e.user.birthday=Date.parse(new Date("1990-06-15")),e.is_birthday=!0):e.formData.userInfo.birthday=n.data.birthday}))},confirmNickname:function(){""!=this.new_nickname&&(this.formData.userInfo.nickname=this.new_nickname),this.nickname_show=!1},cancelNickname:function(){this.new_nickname=this.formData.userInfo.nickname,this.nickname_show=!1},setGender:function(e){this.user.gender=e.value[0],this.formData.userInfo.gender=e.indexs[0],this.gender_show=!1},birthdayShow:function(){if(!this.is_birthday)return t.showError("不可修改"),!1;this.birthday_show=!0},setBirthday:function(n){this.formData.userInfo.birthday=e.$u.timeFormat(n.value,"yyyy-mm-dd"),this.birthday_show=!1},action:function(){var n=this.formData.userInfo;return""==n.nickname?(t.showError("请输入姓名昵称"),!1):0==n.gender?(t.showError("请选择性别"),!1):void t._post_form("user/detail",n,(function(n){t.showSuccess(n.msg,(function(){e.navigateBack()}))}),!1,(function(){}))}}};n.default=a}).call(this,t("df3c")["default"])},"489b":function(e,n,t){"use strict";(function(e,n){var a=t("47a9");t("8ae9");a(t("3240"));var i=a(t("4da6"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(i.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"4da6":function(e,n,t){"use strict";t.r(n);var a=t("5879"),i=t("dd42");for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);t("fdc0");var r=t("828b"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"a3edef0c",null,!1,a["a"],void 0);n["default"]=u.exports},5879:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return a}));var a={"u-Form":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--form/u--form")]).then(t.bind(null,"fce4"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"c4e9"))},"u-Input":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--input/u--input")]).then(t.bind(null,"07cc"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"fa8a"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"1750"))},uModal:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(t.bind(null,"a130"))},uPicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(t.bind(null,"fba6"))},uDatetimePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(t.bind(null,"b545"))}},i=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.nickname_show=!0},e.e1=function(n){e.gender_show=!0},e.e2=function(n){e.gender_show=!1},e.e3=function(n){e.birthday_show=!1})},o=[]},dd42:function(e,n,t){"use strict";t.r(n);var a=t("32be"),i=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=i.a},fdc0:function(e,n,t){"use strict";var a=t("225c"),i=t.n(a);i.a}},[["489b","common/runtime","common/vendor"]]]);